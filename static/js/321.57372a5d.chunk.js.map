{"version":3,"file":"static/js/321.57372a5d.chunk.js","mappings":"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","sources":["components/Movies/SearchBar/SearchBar.styled.jsx","components/Movies/SearchBar/SearchBar.jsx","components/Movies/FilmsList/FilmsList.styled.jsx","components/Movies/FilmsList/FilmsListItem/FilmsListItem.styled.jsx","components/Movies/FilmsList/FilmsListItem/FilmsListItem.jsx","components/Movies/FilmsList/FilmsList.jsx","components/Movies/Movies.jsx","services/useLocalStorage.js","../node_modules/react-use/esm/useFirstMountState.js","Pages/MoviesPage.jsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nexport const Form = styled.form``;\n\nexport const Input = styled.input`\n  margin-right: 15px;\n`;\n\nexport const Button = styled.button`\n  border-radius: 20px;\n  border: none;\n  padding: 5px 10px;\n  :active {\n    box-shadow: 2px 2px 2px 2px #bab8b8;\n  }\n`;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Form, Input } from './SearchBar.styled';\n\nconst SearchBar = ({ onSubmit, onChange }) => {\n  const [q, setQ] = useState('');\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit(q);\n    onChange(q);\n    setQ('');\n  };\n\n  const handleChange = e => {\n    setQ(e.currentTarget.value.toLowerCase());\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Input onChange={handleChange} value={q} type=\"text\" />\n      <Button type=\"submit\">Search</Button>\n    </Form>\n  );\n};\n\nexport default SearchBar;\n\nSearchBar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import styled from '@emotion/styled';\n\nexport const List = styled.ul``;\n","import styled from '@emotion/styled';\nimport { NavLink } from 'react-router-dom';\n\nexport const Link = styled(NavLink)``;\n\nexport const Item = styled.li`\n  :not(:last-child) {\n    margin-bottom: 5px;\n  }\n`;\n","import { Outlet, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { Item, Link } from './FilmsListItem.styled';\n\nconst FilmsListItem = ({ id, title }) => {\n  const location = useLocation();\n  return (\n    <Item>\n      <Link to={`/movies/${id}`} state={{ from: location }}>\n        {title}\n      </Link>\n      <Outlet />\n    </Item>\n  );\n};\nexport default FilmsListItem;\nFilmsListItem.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n};\n","import { List } from './FilmsList.styled';\nimport PropTypes from 'prop-types';\nimport FilmsListItem from './FilmsListItem/FilmsListItem';\n\nconst FilmsList = ({ films }) => {\n  console.log(films);\n  return (\n    <List>\n      {films.length > 0 &&\n        films.map(({ id, name, title }) => (\n          <FilmsListItem key={id} id={id} title={title ?? name} />\n        ))}\n    </List>\n  );\n};\n\nexport default FilmsList;\n\nFilmsList.propTypes = {\n  films: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      title: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    })\n  ),\n};\n","import { useState } from 'react';\nimport SearchBar from './SearchBar/SearchBar';\nimport { toast } from 'react-toastify';\nimport { useEffect } from 'react';\nimport { fetchFilmsByName } from 'services/fetch-api';\nimport { useSearchParams } from 'react-router-dom';\nimport { useFirstMountState } from 'react-use';\nimport FilmsList from './FilmsList/FilmsList';\nimport { useLocalStorage } from 'services/useLocalStorage';\n\nconst Movies = () => {\n  const [films, setFilms] = useLocalStorage([], 'films');\n  const [q, setQ] = useState('');\n  const [searchParam, setSearchParam] = useSearchParams();\n  const isFirstRender = useFirstMountState();\n  const query = searchParam.get('query') ?? '';\n  console.log(query);\n\n  const updQuery = q => {\n    if (q.trim() === '') {\n      toast.error('Please write a name of the film!');\n      return;\n    }\n\n    setQ(q);\n  };\n\n  const updQueryString = query => {\n    const nextParam = query !== '' ? { query } : {};\n    setSearchParam(nextParam);\n  };\n\n  useEffect(() => {\n    if (!isFirstRender) {\n      fetchFilmsByName(q).then(setFilms);\n    }\n  }, [isFirstRender, q, setFilms]);\n\n  if (!films) {\n    return;\n  }\n  console.log(films);\n  return (\n    <div>\n      <SearchBar onSubmit={updQuery} onChange={updQueryString} />\n      {query !== '' && <FilmsList films={films} />}\n    </div>\n  );\n};\nexport default Movies;\n","import { useState, useEffect } from 'react';\n\nconst useLocalStorage = (initialValue, key) => {\n  const getValue = () => {\n    const storage = localStorage.getItem(key);\n\n    if (storage) {\n      return JSON.parse(storage);\n    }\n\n    return initialValue;\n  };\n\n  const [value, setValue] = useState(getValue);\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(value));\n  }, [value, key]);\n\n  return [value, setValue];\n};\n\nexport { useLocalStorage };\n","import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","import Movies from 'components/Movies/Movies';\nimport { Outlet } from 'react-router-dom';\n\nconst MoviesPage = () => {\n  return (\n    <div>\n      <Movies />\n      <Outlet />\n    </div>\n  );\n};\nexport default MoviesPage;\n"],"names":["Form","styled","_templateObject","_taggedTemplateLiteral","Input","_templateObject2","Button","_templateObject3","_ref","onSubmit","onChange","_useState","useState","_useState2","_slicedToArray","q","setQ","_jsxs","e","preventDefault","children","_jsx","currentTarget","value","toLowerCase","type","List","Link","NavLink","Item","id","title","location","useLocation","to","concat","state","from","Outlet","films","console","log","length","map","_ref2","name","FilmsListItem","_searchParam$get","_useLocalStorage","initialValue","key","storage","localStorage","getItem","JSON","parse","setValue","useEffect","setItem","stringify","useLocalStorage","_useLocalStorage2","setFilms","_useSearchParams","useSearchParams","_useSearchParams2","searchParam","setSearchParam","isFirstRender","isFirst","useRef","current","useFirstMountState","query","get","fetchFilmsByName","then","SearchBar","trim","toast","FilmsList","Movies"],"sourceRoot":""}